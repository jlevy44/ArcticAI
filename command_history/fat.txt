./fat_dermis_epi_sq_model
for base in 153_A1d 46_A2b 41_A1c 91_A2b 3_A2b 3_A2c 53_A1b 121_B1b 46_A2d 108_A1b 41_A2b 37_A1c 102_A1d 20_B1c 43_A2b 37_A2d 125_A2d 5_A1d 37_A2eX 44_A1c 5_A1eX 20_B1d 78_A2d 135_A1b 125_A2b 85_A1b 105_A2c 90_A2b 36_B2e 66_A1b 151_A1c; do submit-job run_torque_job -c "pathflowai-preprocess preprocess_pipeline -gtm -nz -odb patch_info.db --threshold 0.05 --preprocess --patches --basename ${base} --input_dir inputs/ --intensity_threshold 35. -ps 256" -i "conda activate pathflow" -ao "-A QDP-Alpha -l nodes=1:ppn=8 -l feature=v100" -t 1 -n 0 -q gpuq ; done
singularity exec --nv  -B /scratch/ -B $(pwd)  --bind ${HOME}:/mnt  /dartfs/rc/lab/V/VaickusL_slow/singularity_containers/PathFlow/pathflowgcn_new.img python PathPretrain/train_model.py --class_balance True --inputs_dir fat_model_inputs/ --checkpoints_dir checkpoints/ --num_classes 2 --verbose True --batch_size 256 --model_save_loc fat_model.pkl --gpu_id 0 --pickle_dataset True
# v2
nohup singularity exec --nv  -B /scratch/ -B $(realpath ../..)  --bind ${HOME}:/mnt  /dartfs/rc/lab/V/VaickusL_slow/singularity_containers/PathFlow/pathflowgcn_new.img python ../PathPretrain/train_model.py --class_balance True --inputs_dir inputs_cnn_tissue_compartments/ --checkpoints_dir checkpoints_tissue_seg/  --num_classes 4 --verbose True --batch_size 256 --model_save_loc tissue_comp_model.pkl --gpu_id 0 --pickle_dataset True &
nohup singularity exec --nv  -B /scratch/ -B $(realpath ../..)  --bind ${HOME}:/mnt  /dartfs/rc/lab/V/VaickusL_slow/singularity_containers/PathFlow/pathflowgcn_new.img python ../PathPretrain/train_model.py --predict True --predict_set val --class_balance True --inputs_dir inputs_cnn_tissue_compartments/ --checkpoints_dir checkpoints_tissue_seg/  --num_classes 4 --verbose True --batch_size 256 --model_save_loc checkpoints_tissue_seg/104.checkpoint.pth --gpu_id 0 --pickle_dataset True &
