for i in $(seq 15); do submit-job run-torque-job -c "export SINGULARITYENV_CUDA_VISIBLE_DEVICES=\${gpuNum} && export SINGULARITYENV_PREPEND_PATH=/dartfs-hpc/rc/home/w/f003k8w/.local/bin/ && singularity exec --nv -B /dartfs/rc/lab/V/VaickusL_slow/  --bind ${HOME}:/mnt  /dartfs/rc/lab/V/VaickusL_slow/singularity_containers/PathFlow/pathflowgcn_new.img python -c 'import torch; torch.ones(100).cuda()'"  -ao "-A QDP-Alpha -l nodes=1:ppn=8:gpus=1:default -l feature=v100" -t 1 -n 0 -q "gpuq" ; done
# use --prefix for installations in other conda environments
mksub -I -l hostlist=p02 -l nodes=1:ppn=20:gpus=1:default,walltime=2:00:00,feature=gpu
gpuNum=$(cat $PBS_GPUFILE | tail -c 2)
